{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chris\\\\Desktop\\\\App_Academy\\\\Ascent-mobile\\\\client\\\\app\\\\screens\\\\SearchScreen.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { Text } from 'react-native-elements';\nimport apiServer from \"../api/apiServer\";\nimport SearchResultsList from \"../components/SearchResultsList\";\nimport { SearchBar } from 'react-native-elements';\nimport { set } from 'react-native-reanimated';\nimport { Context as routeContext } from \"../context/RouteContext\";\nimport { Context as areaContext } from \"../context/AreaContext\";\nimport AreaSearchResultsList from \"../components/AreaSearchResultsList\";\nimport RouteSearchResultsList from \"../components/RouteSearchResultsList\";\n\nvar SearchScreen = function SearchScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(routeContext),\n      setSearchedRoutes = _useContext.setSearchedRoutes;\n\n  var _useContext2 = useContext(areaContext),\n      setSearchedAreas = _useContext2.setSearchedAreas;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      areaSearchResults = _useState2[0],\n      setAreaSearchResults = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      routeSearchResults = _useState4[0],\n      setRouteSearchResults = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      value = _useState6[0],\n      setValue = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cachedArea = _useState8[0],\n      setCachedArea = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cachedRoute = _useState10[0],\n      setCachedRoute = _useState10[1];\n\n  var grabData = function grabData() {\n    var areaRes, routeRes;\n    return _regeneratorRuntime.async(function grabData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/area/\"));\n\n          case 3:\n            areaRes = _context.sent;\n            setCachedArea(areaRes.data.areas);\n            setSearchedAreas(areaRes.data.areas);\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 11:\n            _context.prev = 11;\n            _context.next = 14;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/route/\"));\n\n          case 14:\n            routeRes = _context.sent;\n            setCachedRoute(routeRes.data.routes);\n            setSearchedRoutes(routeRes.data.routes);\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.prev = 19;\n            _context.t1 = _context[\"catch\"](11);\n            console.log(_context.t1);\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8], [11, 19]], Promise);\n  };\n\n  useEffect(function () {\n    grabData();\n  }, []);\n\n  var searchFilter = function searchFilter(search) {\n    setValue(search);\n    var searchedArea = cachedArea.filter(function (item) {\n      var itemData = \"\" + item.name.toUpperCase();\n      var searchData = search.toUpperCase();\n      return itemData.indexOf(searchData) > -1;\n    });\n    setAreaSearchResults(searchedArea);\n    var searchedRoute = cachedRoute.filter(function (item) {\n      var itemData = \"\" + item.name.toUpperCase();\n      var searchData = search.toUpperCase();\n      return itemData.indexOf(searchData) > -1;\n    });\n    setRouteSearchResults(searchedRoute);\n  };\n\n  return React.createElement(SafeAreaView, {\n    showsVerticalScrollIndicator: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, React.createElement(ScrollView, {\n    nestedScrollEnabled: true,\n    showsVerticalScrollIndicator: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, React.createElement(SearchBar, {\n    value: value,\n    onChangeText: function onChangeText(text) {\n      return searchFilter(text);\n    },\n    lightTheme: true,\n    placeholder: \"Search\",\n    placeholderTextColor: \"black\",\n    inputStyle: {\n      color: \"black\"\n    },\n    searchIcon: {\n      color: \"black\"\n    },\n    autoCapitalize: \"none\",\n    autoCorrect: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    h3: true,\n    style: {\n      backgroundColor: \"black\",\n      color: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"Area\"), areaSearchResults.length === 0 ? React.createElement(Text, {\n    style: {\n      color: \"red\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 51\n    }\n  }, \"No items found\") : null, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, React.createElement(FlatList, {\n    data: areaSearchResults,\n    keyExtractor: function keyExtractor(result) {\n      return result.id.toString();\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(TouchableOpacity, {\n        style: {\n          borderBottomWidth: 1,\n          backgroundColor: \"#bdc6cf\"\n        },\n        onPress: function onPress() {\n          return navigation.navigate('AreaDetail', {\n            id: item.id,\n            title: item.name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 33\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 60,\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 37\n        }\n      }, item.image_url ? React.createElement(Image, {\n        style: styles.image,\n        source: {\n          uri: item.image_url\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 59\n        }\n      }) : React.createElement(Image, {\n        style: styles.image,\n        source: require(\"../images/placeholderImage.jpeg\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 122\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 41\n        }\n      }, React.createElement(View, {\n        style: {\n          paddingTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 45\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16,\n          fontWeight: \"bold\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 49\n        }\n      }, item.name)), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 45\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 12\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 49\n        }\n      }, \"Created by: \", item.User.username), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 49\n        }\n      }, item.Routes.length, \" Routes\"))), React.createElement(View, {\n        style: {\n          paddingLeft: 4,\n          paddingTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 41\n        }\n      })));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  })), React.createElement(Text, {\n    h3: true,\n    style: {\n      backgroundColor: \"black\",\n      color: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Route\"), routeSearchResults.length === 0 ? React.createElement(Text, {\n    style: {\n      color: \"red\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 52\n    }\n  }, \"No items found\") : null, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, React.createElement(FlatList, {\n    data: routeSearchResults,\n    keyExtractor: function keyExtractor(result) {\n      return result.id.toString();\n    },\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return React.createElement(TouchableOpacity, {\n        style: {\n          borderBottomWidth: 1,\n          backgroundColor: \"#bdc6cf\"\n        },\n        onPress: function onPress() {\n          return navigation.navigate('RouteDetail', {\n            id: item.id,\n            title: item.name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 33\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 60,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 37\n        }\n      }, item.image_url ? React.createElement(Image, {\n        style: styles.image,\n        source: {\n          uri: item.image_url\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 59\n        }\n      }) : React.createElement(Image, {\n        style: styles.image,\n        source: require(\"../images/placeholderImage.jpeg\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 122\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 41\n        }\n      }, React.createElement(View, {\n        style: {\n          paddingTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 45\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16,\n          fontWeight: \"bold\",\n          marginRight: 150,\n          width: 125\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 49\n        }\n      }, item.name), React.createElement(Text, {\n        style: {\n          fontSize: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 49\n        }\n      }, item.Area.name)), React.createElement(View, {\n        style: {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 45\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          marginTop: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 49\n        }\n      }, \"Created by: \", item.User.username))), React.createElement(View, {\n        style: {\n          alignItems: \"flex-end\",\n          width: 55\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 41\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 45\n        }\n      }, item.type), React.createElement(Text, {\n        style: {\n          marginTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 45\n        }\n      }, item.grade))));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  image: {\n    width: 80,\n    height: 60\n  }\n});\n\nSearchScreen.navigationOptions = function (_ref4) {\n  var navigation = _ref4.navigation;\n  return {\n    title: \"Search\",\n    headerTitleStyle: {\n      color: 'white'\n    },\n    headerBackTitleVisible: false,\n    headerStyle: {\n      backgroundColor: 'black'\n    }\n  };\n};\n\nexport default SearchScreen;","map":{"version":3,"sources":["C:/Users/Chris/Desktop/App_Academy/Ascent-mobile/client/app/screens/SearchScreen.js"],"names":["React","useState","useEffect","useContext","Text","apiServer","SearchResultsList","SearchBar","set","Context","routeContext","areaContext","AreaSearchResultsList","RouteSearchResultsList","SearchScreen","navigation","setSearchedRoutes","setSearchedAreas","areaSearchResults","setAreaSearchResults","routeSearchResults","setRouteSearchResults","value","setValue","cachedArea","setCachedArea","cachedRoute","setCachedRoute","grabData","get","areaRes","data","areas","console","log","routeRes","routes","searchFilter","search","searchedArea","filter","item","itemData","name","toUpperCase","searchData","indexOf","searchedRoute","text","color","backgroundColor","length","result","id","toString","borderBottomWidth","navigate","title","height","flexDirection","image_url","styles","image","uri","require","paddingTop","fontSize","fontWeight","User","username","Routes","paddingLeft","justifyContent","marginRight","width","Area","marginTop","alignItems","type","grade","StyleSheet","create","navigationOptions","headerTitleStyle","headerBackTitleVisible","headerStyle"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport {View, StyleSheet, ScrollView, FlatList, SectionList, TouchableOpacity, Image, SafeAreaView} from 'react-native';\r\nimport {Text} from 'react-native-elements'\r\n// import SearchBar from '../components/SearchBar';\r\nimport apiServer from '../api/apiServer'\r\nimport SearchResultsList from '../components/SearchResultsList';\r\nimport {SearchBar} from 'react-native-elements'\r\nimport { set } from 'react-native-reanimated';\r\nimport {Context as routeContext} from '../context/RouteContext'\r\nimport {Context as areaContext} from '../context/AreaContext'\r\nimport AreaSearchResultsList from '../components/AreaSearchResultsList'\r\nimport RouteSearchResultsList from '../components/RouteSearchResultsList'\r\n\r\nconst SearchScreen = ({navigation}) => {\r\n    // const [searchTerm,  setSearchTerm] = useState('')\r\n    const {setSearchedRoutes} = useContext(routeContext)\r\n    const {setSearchedAreas} = useContext(areaContext)\r\n    const [areaSearchResults, setAreaSearchResults] = useState([])\r\n    const [routeSearchResults, setRouteSearchResults] = useState([])\r\n    const [value,setValue] = useState('')\r\n    const [cachedArea, setCachedArea]= useState([])\r\n    const [cachedRoute, setCachedRoute]= useState([])\r\n    \r\n    \r\n    // const onTermSubmit = async(search)=>{\r\n    //     console.log(search)\r\n    //     try{\r\n    //         let areaRes = await apiServer.get(`/search/areas/${search}`)\r\n    //         setAreaSearchResults(areaRes.data.areas)\r\n    //     }catch(err){\r\n    //         console.log(err)\r\n    //     }\r\n    //     try{\r\n    //         let routeRes = await apiServer.get(`search/routes/${search}`)\r\n    //         setRouteSearchResults(routeRes.data.routes)\r\n    //     }catch(err){\r\n    //         console.log(err)\r\n    //     }\r\n        \r\n    // }\r\n    \r\n    const grabData = async()=>{\r\n        try{\r\n            let areaRes = await apiServer.get(`/area/`)\r\n            // setAreaSearchResults(areaRes.data.areas)\r\n            setCachedArea(areaRes.data.areas)\r\n            setSearchedAreas(areaRes.data.areas)\r\n        }catch(err){\r\n            console.log(err)\r\n        }\r\n        try{\r\n            let routeRes = await apiServer.get(`/route/`)\r\n            // setRouteSearchResults(routeRes.data.routes)\r\n            setCachedRoute(routeRes.data.routes)\r\n            setSearchedRoutes(routeRes.data.routes)\r\n            \r\n        }catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        grabData();\r\n    },[])\r\n\r\n    const searchFilter = (search) =>{\r\n        setValue(search)\r\n        const searchedArea = cachedArea.filter(item =>{\r\n            const itemData = `${item.name.toUpperCase()}`;\r\n            const searchData = search.toUpperCase();\r\n             return itemData.indexOf(searchData)> -1;\r\n        })\r\n        setAreaSearchResults(searchedArea)\r\n\r\n        const searchedRoute = cachedRoute.filter(item =>{\r\n            const itemData = `${item.name.toUpperCase()}`;\r\n            const searchData = search.toUpperCase();\r\n             return itemData.indexOf(searchData)> -1;\r\n        })\r\n        setRouteSearchResults(searchedRoute)\r\n    }\r\n    \r\n    \r\n    return (\r\n        <SafeAreaView showsVerticalScrollIndicator={false}>\r\n            <ScrollView nestedScrollEnabled={true} showsVerticalScrollIndicator={false}>\r\n            {/* <SearchBar\r\n            // setSearchTerm={setSearchTerm}\r\n            // searchTerm={searchTerm}\r\n            // onTermSubmit={()=>onTermSubmit(searchTerm)}\r\n            ></SearchBar> */}\r\n            <SearchBar\r\n            value={value}\r\n            onChangeText={text => searchFilter(text)}\r\n            lightTheme\r\n            placeholder={\"Search\"}\r\n            placeholderTextColor={\"black\"}\r\n            inputStyle={{color:\"black\"}}\r\n            searchIcon={{color:\"black\"}}\r\n            autoCapitalize=\"none\"\r\n            autoCorrect={false}\r\n            />\r\n            {/* \"#bdc6cf\" */}\r\n                <Text h3 style={{backgroundColor:\"black\", color:\"white\"}}>Area</Text>\r\n                {areaSearchResults.length === 0 ? <Text style={{color:\"red\"}}>No items found</Text> : null}\r\n                    <View>\r\n                    <FlatList\r\n                        data={areaSearchResults}\r\n                        keyExtractor={(result)=> result.id.toString()}\r\n                        renderItem={({item})=>{\r\n                            return(\r\n                                <TouchableOpacity style={{borderBottomWidth:1, backgroundColor:\"#bdc6cf\"}} onPress={()=> navigation.navigate('AreaDetail',{id:item.id, title: item.name})}>\r\n                                    <View style={{  height:60, flexDirection:\"row\", }}>\r\n                                        {item.image_url ? <Image style={styles.image} source={{uri: item.image_url}}/> : <Image style={styles.image} source={require('../images/placeholderImage.jpeg')}/>}\r\n                                        <View >\r\n                                            <View style={{paddingTop:5}}>\r\n                                                <Text style={{ fontSize:16,fontWeight:\"bold\",}}> \r\n                                                    \r\n                                                    {item.name}\r\n                                                </Text>\r\n                                            </View>\r\n                                            <View>\r\n                                                <Text style={{fontSize:12}}>\r\n                                                    Created by: {item.User.username}\r\n                                                </Text>\r\n                                                <Text>\r\n                                                {item.Routes.length} Routes\r\n                                                </Text>\r\n                                            </View>\r\n                                        </View>\r\n                                        <View style={{ paddingLeft: 4, paddingTop:10}}>\r\n                                            \r\n                                        </View>\r\n                                    </View>\r\n                                </TouchableOpacity>\r\n                            )\r\n                        }}\r\n                    />\r\n                    </View>\r\n                <Text h3 style={{backgroundColor:\"black\", color:\"white\"}}>Route</Text>\r\n                {routeSearchResults.length === 0 ? <Text style={{color:\"red\"}}>No items found</Text> : null}\r\n                <View>\r\n                    <FlatList\r\n                        data={routeSearchResults}\r\n                        keyExtractor={(result)=> result.id.toString()}\r\n                        renderItem={({item})=>{\r\n                            return(\r\n                                <TouchableOpacity style={{borderBottomWidth:1, backgroundColor:\"#bdc6cf\"}} onPress={()=> navigation.navigate('RouteDetail', {id:item.id, title:item.name})}>\r\n                                    <View style={{  height:60, flexDirection:\"row\", justifyContent:\"space-between\"}}>\r\n                                        {item.image_url ? <Image style={styles.image} source={{uri: item.image_url}}/> : <Image style={styles.image} source={require('../images/placeholderImage.jpeg')}/>}\r\n                                        <View >\r\n                                            <View style={{ paddingTop:5}}>\r\n                                                <Text style={{ fontSize:16,fontWeight:\"bold\", marginRight:150, width:125}}>\r\n                                                    {item.name}\r\n                                                </Text>\r\n                                                <Text style={{fontSize:10}}>\r\n                                                    {item.Area.name}\r\n                                                </Text>\r\n                                            </View>\r\n                                            <View style={{}} >\r\n                                                <Text style={{fontSize:12,marginTop:7}}>\r\n                                                    Created by: {item.User.username}\r\n                                                </Text>\r\n                                            </View>\r\n                                        </View>\r\n                                        <View style={{ alignItems:\"flex-end\", width:55,}}>\r\n                                            <Text >\r\n                                                {item.type}\r\n                                            </Text>\r\n                                            <Text style={{marginTop:5}}>\r\n                                                {item.grade}\r\n                                            </Text>\r\n                                        </View>\r\n                                    </View>\r\n                                </TouchableOpacity>\r\n                            )\r\n                        }}\r\n                    />\r\n                    </View>\r\n\r\n\r\n                \r\n                {/* <SearchResultsList results={areaSearchResults}/>\r\n                <Text h3 style={{backgroundColor:\"#bdc6cf\"}}>Routes</Text>\r\n                <SearchResultsList results={routeSearchResults}/> */}\r\n            {/* <SectionList\r\n                sections={[\r\n                    {\r\n                        title: 'Areas',\r\n                        data: areaSearchResults,\r\n                    },\r\n                    {\r\n                        title: 'Routes',\r\n                        data: routeSearchResults\r\n                    }\r\n                ]}\r\n                renderItem={({item}) =>{\r\n                    return(\r\n                        \r\n                        <Text>{item.name}</Text>\r\n                    )\r\n                }}\r\n                renderSectionHeader={({section}) =>{\r\n                    return(\r\n                    \r\n\r\n                    <Text h3 style={{backgroundColor:\"#bdc6cf\", marginBottom:10}}>{section.title}</Text>\r\n                    \r\n                    )\r\n                }}\r\n                keyExtractor={(item)=>item.id.toString()}\r\n            /> */}\r\n           </ScrollView>\r\n        </SafeAreaView>    \r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    image:{\r\n        width:80,\r\n        height:60\r\n    }\r\n})\r\nSearchScreen.navigationOptions = ({navigation}) => {\r\n  \r\n    return {\r\n      title: \"Search\" ,\r\n      headerTitleStyle: {color: 'white'},\r\n      headerBackTitleVisible: false,\r\n      headerStyle: {backgroundColor: 'black', }\r\n    };\r\n  };\r\nexport default SearchScreen;"]},"metadata":{},"sourceType":"module"}