{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport createDataContext from \"./createDataContext\";\nimport apiServer from \"../api/apiServer\";\nimport { navigate } from \"../setNavigator\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\n\nvar areaReducer = function areaReducer(state, action) {\n  switch (action.type) {\n    case \"get_areas\":\n      return action.payload;\n\n    case \"get_area\":\n      return action.payload;\n\n    case \"get_followed_areas\":\n      return action.payload;\n\n    case \"get_user_areas\":\n      return action.payload;\n\n    default:\n      return state;\n  }\n};\n\nvar getAreas = function getAreas(dispatch) {\n  return function _callee() {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/area\"));\n\n          case 2:\n            res = _context.sent;\n            dispatch({\n              type: \"get_areas\",\n              payload: res.data\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar getArea = function getArea(dispatch) {\n  return function _callee2(id) {\n    var res;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/area/\" + id));\n\n          case 2:\n            res = _context2.sent;\n            dispatch({\n              type: \"get_area\",\n              payload: res.data\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar getUserAreas = function getUserAreas(dispatch) {\n  return function _callee3(id) {\n    var userid, res;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userid'));\n\n          case 2:\n            userid = _context3.sent;\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/area/user/\" + userid));\n\n          case 5:\n            res = _context3.sent;\n            dispatch({\n              type: \"get_user_areas\",\n              payload: res.data.areas\n            });\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar getFollowedAreas = function getFollowedAreas(dispatch) {\n  return function _callee4() {\n    var userid, res;\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userid'));\n\n          case 2:\n            userid = _context4.sent;\n            _context4.next = 5;\n            return _regeneratorRuntime.awrap(apiServer.get(\"/area/user/\" + userid + \"/follows\"));\n\n          case 5:\n            res = _context4.sent;\n            dispatch({\n              type: \"get_followed_areas\",\n              payload: res.data.user.followedAreas\n            });\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar addArea = function addArea(dispatch) {\n  return function _callee5(name, description, navigateAway, alertMessage) {\n    var userid, res;\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userid'));\n\n          case 2:\n            userid = _context5.sent;\n            _context5.next = 5;\n            return _regeneratorRuntime.awrap(apiServer.post(\"/area\", {\n              name: name,\n              description: description,\n              user_id: userid\n            }));\n\n          case 5:\n            res = _context5.sent;\n\n            if (navigateAway) {\n              navigateAway();\n            }\n\n            if (alertMessage) {\n              alertMessage();\n            }\n\n          case 8:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar editArea = function editArea(dispatch) {\n  return function _callee6(id, name, description, navigateAway, alertMessage) {\n    var res;\n    return _regeneratorRuntime.async(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return _regeneratorRuntime.awrap(apiServer.put(\"/area/\" + id, {\n              name: name,\n              description: description\n            }));\n\n          case 2:\n            res = _context6.sent;\n            dispatch({\n              type: \"edit_area\",\n              payload: {\n                id: id,\n                name: name,\n                description: description\n              }\n            });\n\n            if (navigateAway) {\n              navigateAway();\n            }\n\n            if (alertMessage) {\n              alertMessage();\n            }\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar delArea = function delArea(dispatch) {\n  return function _callee7(id, navigateAway, alertMessage) {\n    var res;\n    return _regeneratorRuntime.async(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _regeneratorRuntime.awrap(apiServer.delete(\"/area/\" + id));\n\n          case 2:\n            res = _context7.sent;\n\n            if (navigateAway) {\n              navigateAway();\n            }\n\n            if (alertMessage) {\n              alertMessage();\n            }\n\n          case 5:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar followArea = function followArea(dispatch) {\n  return function _callee8(id, navigateAway, alertMessage) {\n    var userid, res;\n    return _regeneratorRuntime.async(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userid'));\n\n          case 2:\n            userid = _context8.sent;\n            _context8.next = 5;\n            return _regeneratorRuntime.awrap(apiServer.post(\"/area/user/\" + userid + \"/area/\" + id));\n\n          case 5:\n            res = _context8.sent;\n\n            if (navigateAway) {\n              navigateAway();\n            }\n\n            if (alertMessage) {\n              alertMessage();\n            }\n\n          case 8:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(areaReducer, {\n  getAreas: getAreas,\n  addArea: addArea,\n  getArea: getArea,\n  editArea: editArea,\n  delArea: delArea,\n  getUserAreas: getUserAreas,\n  followArea: followArea,\n  getFollowedAreas: getFollowedAreas\n}, []),\n    Provider = _createDataContext.Provider,\n    Context = _createDataContext.Context;\n\nexport { Provider, Context };","map":{"version":3,"sources":["C:/Users/Chris/Desktop/App_Academy/Ascent-mobile/client/app/context/AreaContext.js"],"names":["React","createDataContext","apiServer","navigate","areaReducer","state","action","type","payload","getAreas","dispatch","get","res","data","getArea","id","getUserAreas","AsyncStorage","getItem","userid","areas","getFollowedAreas","user","followedAreas","addArea","name","description","navigateAway","alertMessage","post","user_id","editArea","put","delArea","delete","followArea","Provider","Context"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport createDataContext from './createDataContext'\r\nimport apiServer from '../api/apiServer'\r\nimport {navigate} from '../setNavigator'\r\nimport { AsyncStorage } from 'react-native';\r\n\r\nconst areaReducer =(state,action)=>{\r\n  switch(action.type){\r\n    case \"get_areas\":\r\n      return action.payload\r\n    case \"get_area\":\r\n      return action.payload\r\n    case \"get_followed_areas\":\r\n      return action.payload    \r\n    case \"get_user_areas\":\r\n      return action.payload\r\n\r\n    // case \"edit_area\":\r\n    //   return state.map((area)=>{\r\n    //     return area.id === action.payload.id ? action.payload : area;\r\n    //   })\r\n    default:\r\n      return state\r\n  }\r\n\r\n};\r\n\r\n//Get all areas\r\nconst getAreas = (dispatch)=>{\r\n  return async ()=>{\r\n    \r\n    const res = await apiServer.get(\"/area\");\r\n    dispatch({type: \"get_areas\", payload: res.data})\r\n  }\r\n}\r\n\r\n//Get 1 area\r\n\r\nconst getArea =(dispatch)=>{\r\n  return async (id)=>{\r\n    const res = await apiServer.get(`/area/${id}`);\r\n    dispatch({type: \"get_area\", payload: res.data})\r\n  }\r\n}\r\n\r\n//get areas created by user\r\nconst getUserAreas = (dispatch)=>{\r\n  return async (id) =>{\r\n    const userid = await AsyncStorage.getItem('userid')\r\n    const res = await apiServer.get(`/area/user/${userid}`)\r\n    dispatch({type: \"get_user_areas\", payload: res.data.areas})\r\n  }\r\n}\r\n\r\n//get followed areas \r\nconst getFollowedAreas = (dispatch) =>{\r\n  return async()=>{\r\n    const userid = await AsyncStorage.getItem('userid')\r\n    const res = await apiServer.get(`/area/user/${userid}/follows`)\r\n    dispatch({type: \"get_followed_areas\", payload: res.data.user.followedAreas})\r\n  }\r\n}\r\n\r\n//Add area\r\nconst addArea =(dispatch) =>{\r\n  return async(name,description,navigateAway,alertMessage)=>{\r\n    const userid = await AsyncStorage.getItem('userid')\r\n    const res = await apiServer.post(\"/area\",{\r\n      name: name,\r\n      description: description,\r\n      user_id: userid\r\n    })\r\n    if(navigateAway){\r\n      navigateAway();\r\n    }\r\n    if(alertMessage){\r\n      alertMessage();\r\n    }\r\n  }\r\n}\r\n\r\n//Edit Area\r\n\r\nconst editArea = (dispatch)=>{\r\n  return async(id,name,description,navigateAway,alertMessage)=>{\r\n\r\n    const res = await apiServer.put(`/area/${id}`, {name,description})\r\n    dispatch({type: \"edit_area\", payload: {id,name,description}})\r\n    if(navigateAway){\r\n      navigateAway();\r\n    }\r\n    if(alertMessage){\r\n      alertMessage();\r\n    }\r\n  }\r\n}\r\n\r\n//Delete Area\r\nconst delArea = (dispatch) =>{\r\n  return async(id,navigateAway,alertMessage)=>{\r\n    const res = await apiServer.delete(`/area/${id}`)\r\n    if(navigateAway){\r\n      navigateAway();\r\n    }\r\n    if(alertMessage){\r\n      alertMessage();\r\n    }\r\n  }\r\n}\r\n\r\n//Follow Area\r\n\r\nconst followArea = (dispatch)=>{\r\n  return async(id,navigateAway,alertMessage) =>{\r\n    const userid = await AsyncStorage.getItem('userid')\r\n    const res = await apiServer.post(`/area/user/${userid}/area/${id}`)\r\n    if(navigateAway){\r\n      navigateAway();\r\n    }\r\n    if(alertMessage){\r\n      alertMessage();\r\n    }\r\n  }\r\n}\r\n\r\nexport const {Provider,Context} =  createDataContext(areaReducer, {getAreas, addArea, getArea, editArea, delArea, getUserAreas,followArea, getFollowedAreas}, [])"]},"metadata":{},"sourceType":"module"}